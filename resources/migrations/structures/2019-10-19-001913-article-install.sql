CREATE TABLE article (id INT AUTO_INCREMENT NOT NULL, route_id INT DEFAULT NULL, identify_id INT DEFAULT NULL, created_by_id INT DEFAULT NULL, updated_by_id INT DEFAULT NULL, deleted_by_id INT DEFAULT NULL, public TINYINT(1) DEFAULT '0' NOT NULL, published_from DATETIME DEFAULT NULL, published_to DATETIME DEFAULT NULL, position SMALLINT DEFAULT 0 NOT NULL, inserted DATETIME DEFAULT NULL, updated DATETIME DEFAULT NULL, INDEX IDX_23A0E6634ECB4E6 (route_id), INDEX IDX_23A0E66E51E104A (identify_id), INDEX IDX_23A0E66B03A8386 (created_by_id), INDEX IDX_23A0E66896DBBDE (updated_by_id), INDEX IDX_23A0E66C76F1F52 (deleted_by_id), INDEX article_public_idx (public), INDEX published_from_to_idx (published_from, published_to), INDEX position_idx (position), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE article_pages (article_entity_id INT NOT NULL, page_entity_id INT NOT NULL, INDEX IDX_57C397645B102D79 (article_entity_id), INDEX IDX_57C39764BACBC292 (page_entity_id), PRIMARY KEY(article_entity_id, page_entity_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE article_sections (article_entity_id INT NOT NULL, page_sections_entity_id INT NOT NULL, INDEX IDX_7E7EB7F35B102D79 (article_entity_id), INDEX IDX_7E7EB7F38805D939 (page_sections_entity_id), PRIMARY KEY(article_entity_id, page_sections_entity_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE article_image (id INT AUTO_INCREMENT NOT NULL, article_id INT DEFAULT NULL, created_by_id INT DEFAULT NULL, updated_by_id INT DEFAULT NULL, deleted_by_id INT DEFAULT NULL, description VARCHAR(255) DEFAULT NULL, inserted DATETIME DEFAULT NULL, updated DATETIME DEFAULT NULL, reference_identifier VARCHAR(255) NOT NULL, identifier VARCHAR(255) NOT NULL, `namespace` VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, path VARCHAR(255) NOT NULL, alt VARCHAR(255) DEFAULT NULL, sha VARCHAR(40) DEFAULT NULL, width SMALLINT DEFAULT NULL, height SMALLINT DEFAULT NULL, type VARCHAR(16) DEFAULT NULL, UNIQUE INDEX UNIQ_B28A764E7294869C (article_id), INDEX IDX_B28A764EB03A8386 (created_by_id), INDEX IDX_B28A764E896DBBDE (updated_by_id), INDEX IDX_B28A764EC76F1F52 (deleted_by_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE article_images (id INT AUTO_INCREMENT NOT NULL, article_id INT DEFAULT NULL, created_by_id INT DEFAULT NULL, updated_by_id INT DEFAULT NULL, deleted_by_id INT DEFAULT NULL, description VARCHAR(255) DEFAULT NULL, inserted DATETIME DEFAULT NULL, updated DATETIME DEFAULT NULL, reference_identifier VARCHAR(255) NOT NULL, identifier VARCHAR(255) NOT NULL, `namespace` VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, path VARCHAR(255) NOT NULL, alt VARCHAR(255) DEFAULT NULL, sha VARCHAR(40) DEFAULT NULL, width SMALLINT DEFAULT NULL, height SMALLINT DEFAULT NULL, type VARCHAR(16) DEFAULT NULL, INDEX IDX_8AD829EA7294869C (article_id), INDEX IDX_8AD829EAB03A8386 (created_by_id), INDEX IDX_8AD829EA896DBBDE (updated_by_id), INDEX IDX_8AD829EAC76F1F52 (deleted_by_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE article_identify (id INT AUTO_INCREMENT NOT NULL, `namespace` VARCHAR(255) NOT NULL, name VARCHAR(255) DEFAULT NULL, identifier VARCHAR(255) NOT NULL, options LONGTEXT NOT NULL COMMENT '(DC2Type:json_array)', INDEX article_identify_namespace_idx (namespace), INDEX article_identify_identifier_idx (identifier), UNIQUE INDEX namespace_name_idx (namespace, name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE article_translation (id INT AUTO_INCREMENT NOT NULL, translatable_id INT DEFAULT NULL, header MEDIUMTEXT DEFAULT NULL, sub_header MEDIUMTEXT DEFAULT NULL, perex MEDIUMTEXT DEFAULT NULL, content LONGTEXT DEFAULT NULL, description LONGTEXT DEFAULT NULL, locale VARCHAR(255) NOT NULL, INDEX IDX_2EEA2F082C2AC5D3 (translatable_id), UNIQUE INDEX article_translation_unique_translation (translatable_id, locale), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE article ADD CONSTRAINT FK_23A0E6634ECB4E6 FOREIGN KEY (route_id) REFERENCES route (id) ON DELETE CASCADE;
ALTER TABLE article ADD CONSTRAINT FK_23A0E66E51E104A FOREIGN KEY (identify_id) REFERENCES article_identify (id) ON DELETE CASCADE;
ALTER TABLE article ADD CONSTRAINT FK_23A0E66B03A8386 FOREIGN KEY (created_by_id) REFERENCES users (id);
ALTER TABLE article ADD CONSTRAINT FK_23A0E66896DBBDE FOREIGN KEY (updated_by_id) REFERENCES users (id);
ALTER TABLE article ADD CONSTRAINT FK_23A0E66C76F1F52 FOREIGN KEY (deleted_by_id) REFERENCES users (id);
ALTER TABLE article_pages ADD CONSTRAINT FK_57C397645B102D79 FOREIGN KEY (article_entity_id) REFERENCES article (id) ON DELETE RESTRICT;
ALTER TABLE article_pages ADD CONSTRAINT FK_57C39764BACBC292 FOREIGN KEY (page_entity_id) REFERENCES page (id) ON DELETE RESTRICT;
ALTER TABLE article_sections ADD CONSTRAINT FK_7E7EB7F35B102D79 FOREIGN KEY (article_entity_id) REFERENCES article (id) ON DELETE RESTRICT;
ALTER TABLE article_sections ADD CONSTRAINT FK_7E7EB7F38805D939 FOREIGN KEY (page_sections_entity_id) REFERENCES page_sections (id) ON DELETE RESTRICT;
ALTER TABLE article_image ADD CONSTRAINT FK_B28A764E7294869C FOREIGN KEY (article_id) REFERENCES article (id) ON DELETE CASCADE;
ALTER TABLE article_image ADD CONSTRAINT FK_B28A764EB03A8386 FOREIGN KEY (created_by_id) REFERENCES users (id);
ALTER TABLE article_image ADD CONSTRAINT FK_B28A764E896DBBDE FOREIGN KEY (updated_by_id) REFERENCES users (id);
ALTER TABLE article_image ADD CONSTRAINT FK_B28A764EC76F1F52 FOREIGN KEY (deleted_by_id) REFERENCES users (id);
ALTER TABLE article_images ADD CONSTRAINT FK_8AD829EA7294869C FOREIGN KEY (article_id) REFERENCES article (id) ON DELETE CASCADE;
ALTER TABLE article_images ADD CONSTRAINT FK_8AD829EAB03A8386 FOREIGN KEY (created_by_id) REFERENCES users (id);
ALTER TABLE article_images ADD CONSTRAINT FK_8AD829EA896DBBDE FOREIGN KEY (updated_by_id) REFERENCES users (id);
ALTER TABLE article_images ADD CONSTRAINT FK_8AD829EAC76F1F52 FOREIGN KEY (deleted_by_id) REFERENCES users (id);
ALTER TABLE article_translation ADD CONSTRAINT FK_2EEA2F082C2AC5D3 FOREIGN KEY (translatable_id) REFERENCES article (id) ON DELETE CASCADE;
